# MCP Server Systemd Service Template
# 
# Installation Instructions:
# 1. Copy this file to /etc/systemd/system/mcp-server.service
# 2. Update the paths in ExecStart and WorkingDirectory
# 3. Update the User to your preferred user
# 4. Run: sudo systemctl daemon-reload
# 5. Run: sudo systemctl enable mcp-server
# 6. Run: sudo systemctl start mcp-server

[Unit]
Description=MCP Data Query Server
After=network.target
Wants=network.target

[Service]
Type=simple
User=your_username
Group=your_groupname
WorkingDirectory=/path/to/mcp-calculator-main
ExecStart=/path/to/mcp-calculator-main/venv/bin/python mcp_pipe.py
Restart=always
RestartSec=5
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=mcp-server

# Environment variables
Environment=MCP_ENDPOINT=wss://api.xiaozhi.me/mcp/?token=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjMyMzM0NywiYWdlbnRJZCI6NTUyNTUyLCJlbmRwb2ludElkIjoiYWdlbnRfNTUyNTUyIiwicHVycG9zZSI6Im1jcC1lbmRwb2ludCIsImlhdCI6MTc1NzI5NzYxMn0.Qw66VsLooShlL_sA9wD-oiKdcIzRpQrtt5AaleHM7l--DM-3IiMaMfOQp3hD1hZXK0Aq2ydkXjYGtUgugPZsAQ
Environment=MCP_CONFIG=./mcp_config.json

# Security settings
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/path/to/mcp-calculator-main

[Install]
WantedBy=multi-user.target

# Usage Commands:
# sudo systemctl start mcp-server     # Start the service
# sudo systemctl stop mcp-server      # Stop the service  
# sudo systemctl restart mcp-server   # Restart the service
# sudo systemctl status mcp-server    # Check service status
# sudo journalctl -u mcp-server -f    # View real-time logs
